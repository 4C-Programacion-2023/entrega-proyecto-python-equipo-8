#Importamos clase pokemon
from pokemon import Pokemon

#Creamos la clase Jugador con sus funciones
class Jugador:
    def __init__(self, nombre):
        self.nombre = nombre
        self.pokemons = []
        self.mochila = {}

    def agregar_pokemon(self, pokemon: Pokemon):
        self.pokemons.append(pokemon)

    def inicializar_mochila(self, pocion, cantidad):
        self.mochila[pocion.nombre] = cantidad

    def usar_pocion(self, pokemon):
        if "Poci贸n de Vida" in self.mochila and self.mochila["Poci贸n de Vida"] > 0:
            print("驴Deseas usar la Poci贸n de Vida para curar a tu Pok茅mon?")
            print("1. S铆   2. No")
            respuesta = int(input())
            if respuesta == 1:
                cantidad_regen = min(20, pokemon.PS_max - pokemon.PS)
                pokemon.PS += cantidad_regen
                self.mochila["Poci贸n de Vida"] -= 1
                print("{} ha usado Poci贸n de Vida y ha regenerado {} puntos de vida.".format(pokemon.nombre, cantidad_regen))
            else:
                print("Decidiste no usar la Poci贸n de Vida.")


    def combatir(self, jugador_oponente):
        if len(self.pokemons) == 0 or len(jugador_oponente.pokemons) == 0:
            print("No hay suficientes Pok茅mon para el combate.")
            return

        pokemon_jugador_1 = self.pokemons[0]
        pokemon_jugador_2 = jugador_oponente.pokemons[0]

        print("隆Comienza el combate entre {} y {}!".format(pokemon_jugador_1.nombre, pokemon_jugador_2.nombre))

        turno = 1
        while pokemon_jugador_1.PS > 0 and pokemon_jugador_2.PS > 0:
            if turno % 2 == 0:
                atacante = jugador_oponente.pokemons[0]
                defensor = self.pokemons[0]
                jugador_atacante = jugador_oponente
                jugador_defensor = self
                
            else:
                atacante = self.pokemons[0]
                defensor = jugador_oponente.pokemons[0]
                jugador_atacante = self
                jugador_defensor = jugador_oponente

            print("""
                Turno de {} 
               ___________________________    
              |                           |
              |  1. Atacar   2. Mochila   |
              |  3. Pasar    4. -------   |
              |___________________________|   
                """.format(atacante.nombre))
            respuesta = int(input())
            if respuesta == 1:
                ataque_seleccionado = atacante.elegir_habilidad()
                print("{} seleccion贸 {}.".format(atacante.nombre, ataque_seleccionado.nombre))
                if ataque_seleccionado.PP == 0:
                    print("隆No tienes mas ataques de este tipo!")
                else:
                    ataque_seleccionado.PP = ataque_seleccionado.PP - 1
                    print("{} ataca a {}.".format(atacante.nombre, defensor.nombre))
                    if ataque_seleccionado.tipo == "Normal":
                        print("""

                              """)
                    if ataque_seleccionado.tipo == "Fuego":
                        print("""
ヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰ
                              """)
                    if ataque_seleccionado.tipo == "Planta":
                        print("""
筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐筐
                              """)
                    if ataque_seleccionado.tipo == "Agua":
                        print("""

                              """)
                    if ataque_seleccionado.tipo == "Psiquico":
                        print("""

                              """)    
                    if ataque_seleccionado.tipo == "Lucha":
                        print("""
ヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰヰ
                              """)
                    if ataque_seleccionado.tipo == "Fantasma":
                        print("""
火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火
                              """)    
                    if ataque_seleccionado.tipo == "Piedra":
                        print("""
火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火火
                              """)
                    if ataque_seleccionado.tipo == "Electrico":
                        print("""
♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀♀
                              """)                                                                                                
                    da帽o = atacante.calcular_da帽o(defensor, ataque_seleccionado)
                    defensor.perder_PS(da帽o)
            elif respuesta == 2:
                print("Contenido de la mochila del {}:".format(jugador_atacante.nombre))
                for item, cantidad in jugador_atacante.mochila.items():
                    print("- {} (Cantidad: {})".format(item, cantidad))
                print("Elige el n煤mero de la poci贸n que deseas usar:")
                num_pocion = int(input())
                pocion_seleccionada = None
                if num_pocion in range(1, len(jugador_atacante.mochila) + 1):
                    pocion_seleccionada = list(jugador_atacante.mochila.keys())[num_pocion - 1]
                if pocion_seleccionada == "Poci贸n de Vida":
                    jugador_atacante.usar_pocion(atacante)
                else:
                    print("Poci贸n inv谩lida o no encontrada en la mochila.")
            elif respuesta == 3:
                break
            if defensor.PS <= 0:
                print("{} ha debilitado a {}.".format(atacante.nombre, defensor.nombre))
                defensor.PS = 0
            turno += 1

        if pokemon_jugador_1.PS <= 0:
            print("{} ha ganado el combate.".format(pokemon_jugador_2.nombre))
        else:
            print("{} ha ganado el combate.".format(pokemon_jugador_1.nombre))
